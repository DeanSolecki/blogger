---
name: home
url: /
controller: HomeCtrl
---

<div class="grid-container">
	<h2>Blog Posts</h2>
	<ul ng-repeat="post in data.posts track by post.id" ng-init="newComment = {}">
		<li>
			<h4>{{post.title}}</h4>
			<h5>by: {{post.nickname}} -- {{post.created_at | date:'MM/dd/yy h:mma'}}</h5>
			<p>{{post.body}}</p>
			<ul ng-repeat=" comment in post.comments">
				<li>{{comment.body}} --  by: {{comment.nickname}} -- {{comment.created_at | date:'MM/dd/yy h:mma'}}
					<span ng-show="user.configName == 'admin' || (user.profile.nickname == comment.nickname)">
						<a href="#!/" ng-click="deleteComment(comment)">Delete</a>
						<a href="#!/" ng-click="fireEditBox(comment)" ng-hide="showEditBox[post.id][comment.id]">Edit</a>
						<span ng-show="showEditBox[post.id][comment.id]">
							<textarea ng-model="comment.body"></textarea>
							<a class="button" href="#!/" ng-click="updateComment(comment)">Update</a>
							<a class="button warning" href="#!/" ng-click="showEditBox[post.id][comment.id] = 0">Cancel</a>
						</span>
					</span>
				</li>
			</ul>
			<span ng-show="user.profile.nickname">
				<a href="#!/" ng-click="fireCommentBox(post.id)" ng-hide="showCommentBox[post.id]">Comment</a>
				<span ng-show="showCommentBox[post.id]">
					<textarea ng-model="post.newComment"></textarea>
					<a class="button" href="#!/" ng-click="submitComment(post)">Submit</a>
					<a class="button warning" href="#!/" ng-click="showCommentBox[post.id] = 0">Cancel</a>
				</span>
			</span>
			<span ng-show="!user.profile.nickname">
				<span ng-show="user.id">
					<p>Create a <a href="#!/" ui-sref="profile">nickname</a> to comment</p>
				</span>
				<span ng-show="!user.id">
					<p><a href="#!" ui-sref="login">Sign in</a> to comment.</p>
				</span>
			</span>
		</li>
	</ul>
	<p>{{ testBin }}</p>
</div>
